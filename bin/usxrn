#!/usr/bin/python3
from argparse import ArgumentParser
import re
from pathlib import Path


if __name__ == '__main__':
    parser = ArgumentParser(description='Rename USX files in max.')
    parser.add_argument('files', nargs="+", help='Name of the USX files')
    args = parser.parse_args()

    renamed_count = 0
    regex = re.compile(r"\d{1,3}(.{3}.usx)")
    for file in args.files:
        filepath = Path(file)
        name = filepath.name
        base = filepath.parent
        match = regex.match(name)
        if match:
            out = match.group(1)
            Path(file).rename(Path(base, out))
            renamed_count += 1
    print(f"Renamed {renamed_count} files")



